<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>video</title>
    <style media="screen">
      .video {
        margin-left: 40%;
        width: 500px;
        height: 500px;
        border: 1px #eee solid;
        display: inline-block;
      }
      button {
        border: 1px #0aa0a0 solid;
      }
      .adds {
        color: red;
      }
    </style>
  </head>
  <body>
    <textarea class="video">

    </textarea>
    <hr>
    <div class="vice">
      <button type="button" name="button">button01</button>
      <button type="button" name="button">button02</button>
      <button type="button" name="button">button03</button>
      <button type="button" name="button">button04</button>
      <button type="button" name="button">button05</button>
      <button type="button" name="button">button06</button>
      <button type="button" name="button">button07</button>
      <button type="button" name="button">button08</button>
      <button type="button" name="button">button09</button>
      <button type="button" name="button">button10</button>
    </div>
    <hr>
    <div class="end">
      <input type="button" name="" value="OK">
    </div>

    <script type="text/javascript">
      // number
      var initNum = {
        "button01": '1',
        "button02": '2',
        "button03": '3',
        "button04": '4',
        "button05": '5',
        "button06": '6',
        "button07": '7',
        "button08": '8',
        "button09": '9',
        "button10": '10',
      }
      var number = []

      // functions
      var contents = function(data) {
        var intent = document.querySelector('.video')
        intent.innerText += data + ','
      }
      var minusContents = function() {
        var intent = document.querySelector('.video')
        intent.innerText = number.join() + ','
      }
      var events = function() {
        var intent = document.querySelector('.vice')
        intent.addEventListener('click', function(event) {
          console.log(event.target.innerText)
          var sign = event.target
          var result = event.target.innerText
          if(number.includes(result)) {
            console.log('have')
            sign.classList.remove('adds')
            for(var i = 0; i < number.length; i++) {
              if(number[i] == result) {
                number.splice(i, 1)
                minusContents()
              }
            }
          } else {
            sign.classList.add('adds')
            contents(result)
            number.push(result)
          }
        })
      }

      events()

      var end = function(arr, obj) {
        var intent = document.querySelector('.end')
        intent.addEventListener('click', function() {
          console.log(number)
          var result = []
          for(var i = 0; i < arr.length; i++) {
            result.push(obj[arr[i]])
          }
          console.log(result)
        })
      }
      end(number, initNum)


      // test
      var testinit = {
        '1': "button01",
        '2': "button02",
        '3': "button03",
        '4': "button04",
        '5': "button05",
        '6': "button06",
        '7': "button07",
        '8': "button08",
        '9': "button09",
        '10': "button10",
      }
      var testNum = [1, 3, 5, 7, 9, 2, 4, 6, 8, 10]

      // test funtion
      var traverse = function(element, arr, obj) {
        var intent = document.querySelector(element)
        var result = []
        for(var i = 0; i < arr.length; i++) {
          result.push(obj[arr[i]])
          number.push(obj[arr[i]])
        }
        intent.innerText = result.join() + ','

        var testclass = document.querySelectorAll('button')
        for(var j = 0; j < testclass.length; j++) {
            if(result.includes(testclass[j].innerText)) {
              testclass[j].classList.add('adds')
            }
        }

      }

      traverse('.video', testNum, testinit)
    </script>
  </body>
</html>

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
  <title>JS Bin</title>
</head>
<body>
<div id="uploadForm">
    <input id="file" type="file"/>
    <button id="upload" type="button">upload</button>
</div>
<script type="text/javascript">
$(document).ready(
  function() {
    var envs = document.getElementById('upload')
    envs.addEventListener('click', function() {
      var formData = new FormData();
      formData.append('file', $('#file')[0].files[0]);
      var flag = $('#file')[0].files[0] || ''
      console.log(flag)
      if(flag) {
        $.ajax({
          url: '/upload',
          type: 'POST',
          cache: false,
          data: formData,
          processData: false,
          contentType: false
        }).done(function(res) {
        alert('yes')
        }).fail(function(res) {
        alert('haha')
        });
      }
    })
    }
  )
</script>
</body>
</html>
